{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '53252560-1c4ffe9c456d309b0775dfd67';\n\n\nexport function fetchImagesByQuery(query) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(`${BASE_URL}?${searchParams.toString()}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n","/**\n * Створює розмітку карток зображень для галереї.\n * @param {Array} images - масив об'єктів з Pixabay (поле hits).\n * @returns {string} - розмітка <li> елементів.\n */\nexport function createGalleryMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              loading=\"lazy\"\n            />\n          </a>\n          <div class=\"gallery-info\">\n            <div class=\"gallery-info-item\">\n              <span class=\"gallery-info-label\">Likes</span>\n              <span class=\"gallery-info-value\">${likes}</span>\n            </div>\n            <div class=\"gallery-info-item\">\n              <span class=\"gallery-info-label\">Views</span>\n              <span class=\"gallery-info-value\">${views}</span>\n            </div>\n            <div class=\"gallery-info-item\">\n              <span class=\"gallery-info-label\">Comments</span>\n              <span class=\"gallery-info-value\">${comments}</span>\n            </div>\n            <div class=\"gallery-info-item\">\n              <span class=\"gallery-info-label\">Downloads</span>\n              <span class=\"gallery-info-value\">${downloads}</span>\n            </div>\n          </div>\n        </li>`;\n      }\n    )\n    .join('');\n}\n\n/**\n * Очищає вміст галереї.\n */\nexport function clearGallery(container) {\n  if (container) {\n    container.innerHTML = '';\n  }\n}\n","import { fetchImagesByQuery } from './js/pixabay-api.js';\nimport { createGalleryMarkup, clearGallery } from './js/render-functions.js';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery');\nconst loaderWrapper = document.querySelector('.loader-wrapper');\n\nif (!searchForm || !galleryList || !loaderWrapper) {\n  // Елементи інтерфейсу не знайдені на сторінці\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchForm?.addEventListener('submit', handleSearchFormSubmit);\n\nfunction handleSearchFormSubmit(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const query = form.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please fill the search field before searching.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery(galleryList);\n  showLoader();\n\n  fetchImagesByQuery(query)\n    .then(data => {\n      if (!data.hits || data.hits.length === 0) {\n        iziToast.error({\n          title: 'No results',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      const markup = createGalleryMarkup(data.hits);\n      galleryList.innerHTML = markup;\n      lightbox.refresh();\n    })\n    .catch(error => {\n      // Помилка запиту вже оброблена тостом\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction showLoader() {\n  loaderWrapper?.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loaderWrapper?.classList.add('is-hidden');\n}\n"],"names":["BASE_URL","API_KEY","fetchImagesByQuery","query","searchParams","response","createGalleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","container","searchForm","galleryList","loaderWrapper","lightbox","SimpleLightbox","handleSearchFormSubmit","event","iziToast","showLoader","data","markup","error","hideLoader"],"mappings":"iyBAAA,MAAMA,EAAW,2BACXC,EAAU,qCAGT,SAASC,EAAmBC,EAAO,CACxC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAED,OAAO,MAAM,GAAGH,CAAQ,IAAII,EAAa,SAAQ,CAAE,EAAE,EAAE,KAAKC,GAAY,CACtE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACpB,CAAG,CACH,CCfO,SAASC,EAAoBC,EAAQ,CAC1C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,0CAE2BL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAOwBC,CAAK;AAAA;AAAA;AAAA;AAAA,iDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iDAIRC,CAAS;AAAA;AAAA;AAAA,cAKrD,EACA,KAAK,EAAE,CACZ,CAKO,SAASC,EAAaC,EAAW,CAClCA,IACFA,EAAU,UAAY,GAE1B,CCjDA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAgB,SAAS,cAAc,iBAAiB,EAMxDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDJ,GAAA,MAAAA,EAAY,iBAAiB,SAAUK,GAEvC,SAASA,EAAuBC,EAAO,CACrCA,EAAM,eAAc,EAGpB,MAAMpB,EADOoB,EAAM,cACA,SAAS,YAAY,MAAM,OAE9C,GAAI,CAACpB,EAAO,CACVqB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,iDACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDT,EAAaG,CAAW,EACxBO,IAEAvB,EAAmBC,CAAK,EACrB,KAAKuB,GAAQ,CACZ,GAAI,CAACA,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCF,EAAS,MAAM,CACb,MAAO,aACP,QACE,2EACF,SAAU,UACpB,CAAS,EACD,MACD,CAED,MAAMG,EAASrB,EAAoBoB,EAAK,IAAI,EAC5CR,EAAY,UAAYS,EACxBP,EAAS,QAAO,CACtB,CAAK,EACA,MAAMQ,GAAS,CAEdJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACT,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbK,GACN,CAAK,CACL,CAEA,SAASJ,GAAa,CACpBN,GAAA,MAAAA,EAAe,UAAU,OAAO,YAClC,CAEA,SAASU,GAAa,CACpBV,GAAA,MAAAA,EAAe,UAAU,IAAI,YAC/B"}